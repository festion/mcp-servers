# GitHub Actions Runner Backup Configuration
# This file contains all configuration options for backup and recovery operations

# =============================================================================
# GENERAL BACKUP SETTINGS
# =============================================================================

# Enable/disable backup system
BACKUP_ENABLED=true

# Default backup destination directory
BACKUP_DESTINATION="/var/backups/github-runner"

# Default backup user (should have appropriate permissions)
BACKUP_USER="root"

# Maximum number of parallel backup operations
BACKUP_MAX_PARALLEL=1

# Backup window duration in hours (for scheduling)
BACKUP_WINDOW_HOURS=4

# =============================================================================
# RETENTION POLICIES
# =============================================================================

# Full backup retention in days
BACKUP_RETENTION_FULL_DAYS=90

# Incremental backup retention in days
BACKUP_RETENTION_INCREMENTAL_DAYS=14

# Configuration backup retention in days
BACKUP_RETENTION_CONFIG_DAYS=30

# General backup retention (fallback)
BACKUP_RETENTION_DAYS=30

# =============================================================================
# COMPRESSION AND ENCRYPTION
# =============================================================================

# Compression level (0-9, 0=no compression, 9=maximum compression)
BACKUP_COMPRESSION_LEVEL=6

# Enable backup encryption
BACKUP_ENCRYPTION_ENABLED=false

# GPG key ID for encryption (required if encryption is enabled)
BACKUP_ENCRYPTION_KEY_ID=""

# Encryption algorithm (gpg, openssl)
BACKUP_ENCRYPTION_ALGORITHM="gpg"

# =============================================================================
# REMOTE STORAGE CONFIGURATION
# =============================================================================

# Enable remote backup storage
BACKUP_REMOTE_ENABLED=false

# Remote storage type (s3, rsync, scp, ftp)
BACKUP_REMOTE_TYPE="rsync"

# Remote storage destination
BACKUP_REMOTE_DESTINATION=""

# Remote storage credentials file
BACKUP_REMOTE_CREDENTIALS=""

# Remote sync options
BACKUP_REMOTE_SYNC_OPTIONS="--archive --compress --delete"

# Remote retention policy (independent from local)
BACKUP_REMOTE_RETENTION_DAYS=180

# =============================================================================
# AWS S3 CONFIGURATION (if BACKUP_REMOTE_TYPE=s3)
# =============================================================================

# S3 bucket name
BACKUP_S3_BUCKET=""

# S3 region
BACKUP_S3_REGION="us-east-1"

# S3 storage class (STANDARD, STANDARD_IA, GLACIER, DEEP_ARCHIVE)
BACKUP_S3_STORAGE_CLASS="STANDARD_IA"

# S3 encryption (AES256, aws:kms)
BACKUP_S3_ENCRYPTION="AES256"

# S3 KMS key ID (if using aws:kms)
BACKUP_S3_KMS_KEY_ID=""

# =============================================================================
# NOTIFICATION SETTINGS
# =============================================================================

# Enable backup notifications
BACKUP_NOTIFICATIONS_ENABLED=false

# Notification webhook URL
BACKUP_NOTIFICATION_URL=""

# Notification events (success, failure, warning, all)
BACKUP_NOTIFICATION_EVENTS="failure,warning"

# Email notification settings
BACKUP_EMAIL_ENABLED=false
BACKUP_EMAIL_SMTP_SERVER=""
BACKUP_EMAIL_SMTP_PORT=587
BACKUP_EMAIL_USERNAME=""
BACKUP_EMAIL_PASSWORD=""
BACKUP_EMAIL_FROM=""
BACKUP_EMAIL_TO=""

# Slack notification settings
BACKUP_SLACK_ENABLED=false
BACKUP_SLACK_WEBHOOK_URL=""
BACKUP_SLACK_CHANNEL="#backups"

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Enable detailed logging
BACKUP_LOGGING_ENABLED=true

# Log level (DEBUG, INFO, WARN, ERROR)
BACKUP_LOG_LEVEL="INFO"

# Log file location
BACKUP_LOG_FILE="/var/log/github-runner-backup.log"

# Log rotation (enabled/disabled)
BACKUP_LOG_ROTATION=true

# Log retention in days
BACKUP_LOG_RETENTION_DAYS=30

# Enable backup performance monitoring
BACKUP_MONITORING_ENABLED=true

# Monitoring data location
BACKUP_MONITORING_DIR="/var/lib/github-runner-backup/monitoring"

# =============================================================================
# BACKUP COMPONENTS CONFIGURATION
# =============================================================================

# Include runner installation files
BACKUP_INCLUDE_INSTALLATION=true

# Include configuration files
BACKUP_INCLUDE_CONFIGURATION=true

# Include persistent data
BACKUP_INCLUDE_DATA=true

# Include log files
BACKUP_INCLUDE_LOGS=false

# Include metrics and monitoring data
BACKUP_INCLUDE_METRICS=false

# Include Docker containers and images
BACKUP_INCLUDE_DOCKER=false

# Include SSL/TLS certificates
BACKUP_INCLUDE_CERTIFICATES=true

# Include SSH keys
BACKUP_INCLUDE_SSH_KEYS=true

# Include environment variables
BACKUP_INCLUDE_ENVIRONMENT=true

# =============================================================================
# BACKUP VALIDATION SETTINGS
# =============================================================================

# Enable automatic backup validation
BACKUP_VALIDATION_ENABLED=true

# Validation level (basic, checksum, deep)
BACKUP_VALIDATION_LEVEL="checksum"

# Enable restore testing
BACKUP_RESTORE_TESTING_ENABLED=false

# Restore test frequency (after every N backups)
BACKUP_RESTORE_TEST_FREQUENCY=7

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Include sensitive files in backup
BACKUP_INCLUDE_SECRETS=true

# Secure backup file permissions
BACKUP_SECURE_PERMISSIONS=true

# Backup file ownership (user:group)
BACKUP_FILE_OWNERSHIP="root:root"

# Backup directory permissions
BACKUP_DIR_PERMISSIONS=750

# Backup file permissions
BACKUP_FILE_PERMISSIONS=640

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================

# I/O priority for backup operations (idle, best-effort, real-time)
BACKUP_IO_PRIORITY="idle"

# CPU priority for backup operations (-20 to 19, lower = higher priority)
BACKUP_CPU_PRIORITY=10

# Maximum bandwidth for remote transfers (in KB/s, 0 = unlimited)
BACKUP_BANDWIDTH_LIMIT=0

# Buffer size for file operations (in bytes)
BACKUP_BUFFER_SIZE=65536

# =============================================================================
# EXCLUSION PATTERNS
# =============================================================================

# Files and directories to exclude from backup (space-separated patterns)
BACKUP_EXCLUDE_PATTERNS="*.tmp *.pid *.lock */_temp/* */cache/* *.log"

# Additional exclude file (one pattern per line)
BACKUP_EXCLUDE_FILE=""

# =============================================================================
# MAINTENANCE MODE SETTINGS
# =============================================================================

# Enable maintenance mode during backups
BACKUP_MAINTENANCE_MODE=false

# Services to stop during maintenance mode
BACKUP_MAINTENANCE_SERVICES="github-runner actions-runner"

# Maintenance mode timeout (seconds)
BACKUP_MAINTENANCE_TIMEOUT=300

# =============================================================================
# DISASTER RECOVERY SETTINGS
# =============================================================================

# Enable disaster recovery features
BACKUP_DISASTER_RECOVERY_ENABLED=true

# Emergency backup location
BACKUP_EMERGENCY_DESTINATION="/tmp/emergency-backups"

# Critical files for emergency backup
BACKUP_CRITICAL_FILES="/opt/github-runner/.runner /opt/github-runner/.credentials /etc/github-runner"

# Recovery verification timeout (seconds)
BACKUP_RECOVERY_TIMEOUT=1800

# =============================================================================
# INTEGRATION SETTINGS
# =============================================================================

# Enable integration with homelab backup infrastructure
BACKUP_HOMELAB_INTEGRATION=false

# Homelab backup system type (proxmox, truenas, custom)
BACKUP_HOMELAB_TYPE="proxmox"

# Homelab backup destination
BACKUP_HOMELAB_DESTINATION=""

# Enable backup health checks
BACKUP_HEALTH_CHECKS_ENABLED=true

# Health check interval (seconds)
BACKUP_HEALTH_CHECK_INTERVAL=86400

# =============================================================================
# EXPERIMENTAL FEATURES
# =============================================================================

# Enable experimental features (use with caution)
BACKUP_EXPERIMENTAL_FEATURES=false

# Enable deduplication
BACKUP_DEDUPLICATION_ENABLED=false

# Deduplication algorithm (rsync, rdiff-backup)
BACKUP_DEDUPLICATION_ALGORITHM="rsync"

# Enable delta backups
BACKUP_DELTA_ENABLED=false

# Enable backup versioning
BACKUP_VERSIONING_ENABLED=false

# Maximum number of backup versions to keep
BACKUP_MAX_VERSIONS=10