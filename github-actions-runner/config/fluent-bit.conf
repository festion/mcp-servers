[SERVICE]
    Flush        1
    Log_Level    info
    Daemon       off
    HTTP_Server  On
    HTTP_Listen  0.0.0.0
    HTTP_Port    2020

[INPUT]
    Name tail
    Path /logs/runner.log
    Tag runner.log
    Refresh_Interval 5
    Skip_Long_Lines On

[INPUT]
    Name tail
    Path /logs/health.log
    Tag health.log
    Refresh_Interval 5
    Skip_Long_Lines On

[INPUT]
    Name tail
    Path /logs/security.log
    Tag security.log
    Refresh_Interval 5
    Skip_Long_Lines On

[FILTER]
    Name grep
    Match runner.log
    Regex log (ERROR|WARN|FATAL)

[OUTPUT]
    Name stdout
    Match *
    Format json_lines

[OUTPUT]
    Name file
    Match *
    Path /logs/aggregated.log
    Format json_lines